



buildscript {
    repositories {
        google()
        jcenter()
    }
}

plugins {
    id 'maven-publish'
}

apply plugin: 'com.android.library'

android {
    compileSdkVersion 30
    buildToolsVersion "30.0.2"

    lintOptions {
        abortOnError false
    }


    defaultConfig {
        minSdkVersion 19
        targetSdkVersion 30
        versionCode 7
        versionName "3.0.1"

        testInstrumentationRunner "androidx.test.runner.AndroidJUnitRunner"
        consumerProguardFiles "consumer-rules.pro"
    }

    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
        }
    }

    dependencies {
        implementation 'androidx.appcompat:appcompat:1.0.2'
        implementation 'androidx.browser:browser:1.0.0'
    }

}

ext {
    bintrayRepo = 'TrustlyAndroidSDK'
    bintrayName = 'trustly.android.library'

    publishedGroupId = 'trustly.android.library'
    libraryName = 'trustly-android-library'
    artifact = 'trustly-android-library'

    libraryDescription = 'Trustly\'s SDK for native android apps.'

    siteUrl = 'https://github.com/trustly/TrustlyAndroidSdk'
    gitUrl = 'https://github.com/trustly/TrustlyAndroidSdk.git'

    libraryVersion = '3.0.1' //UPDATE WHEN RELEASING A NEW PACKAGE

    developerId = 'Trustly'
    developerName = 'Team Bulle'
        developerEmail = 'sdk@trustly.com'

    licenseName = 'MIT License'
    licenseUrl = 'https://opensource.org/licenses/mit-license.php'
    allLicenses = ["MIT"]

}

afterEvaluate {
    publishing {
        publications {
            release(MavenPublication) {
                from(components.release)
                artifactId = 'trustly-android-library'
                groupId = publishedGroupId
                version = libraryVersion

                pom {
                    name = artifact
                    description = libraryDescription
                    url = siteUrl

                    licenses {
                        license {
                            name = licenseName
                            url = licenseUrl
                        }
                    }
                    developers {
                        developer {
                            id = developerId
                            name = developerName
                            email = developerEmail
                        }
                    }
                }
            }

        }
            repositories {
                maven {
                    name = "GitHubPackages"
                    url = uri("https://maven.pkg.github.com/trustly/TrustlyAndroidSdk")
                    credentials {
                        username = "<GITHUB-USER-NAME>"
                        password = "<GITHUB-PERSONAL-ACCESS-TOKEN>"
                    }
                }
            }
        }
    }
